...Thu Jun 10 13:41:57 CEST 2021: - begin running script
#!/bin/bash -l
#SBATCH --account=snic2021-5-248
#SBATCH --partition=core
#SBATCH --ntasks=10
#SBATCH --time=2-04:00:00
#SBATCH --job-name=Meteor
#SBATCH --mail-user=zn.tportlock@gmail.com
#SBATCH --mail-type=ALL
##SBATCH --output=/proj/uppstore2019028/projects/metagenome/theo/newscripts/meteor/logs/%j 

function Run {
	start=$(date +%m)
	echo "...$(date): $1 - begin"; echo ""
	$@ \
	&& (echo "...$(date): $1 - done"; echo "") \
	|| (echo "...$(date): $1 - failed"; echo "")
	end=$(date +%s)
	echo "...time taken: $((end-start))"; echo ""
}
function Parse_variables {
	v_project_dir="$TMPDIR"
	v_workdir="${v_project_dir}/working"
	v_refdir="${v_project_dir}/reference"
	v_fastqgz1="$(readlink -f ${fastqgzs[0]})"
	v_fastqgz2="$(readlink -f ${fastqgzs[1]})"
	v_fastqgz1_unzip="${v_workdir}/$(basename $v_fastqgz1 .gz).unzipped"
	v_fastqgz2_unzip="${v_workdir}/$(basename $v_fastqgz2 .gz).unzipped"
	v_trimmedS="${v_workdir}/${sampleId}.trimmed.s.fastq"
	v_final1="${v_workdir}/${sampleId}_1.fastq"
	v_final2="${v_workdir}/${sampleId}_2.fastq"
	v_sampledir="${v_project_dir}/${catalog_type}/sample/${sampleId}"
	v_downstream_dir="$v_project_dir/Downstream"
	vars="$(compgen -A variable | grep "^v_.*")"
	for var in ${vars}; do echo "${var}=${!var}"; done
	for var in ${vars}; do if [[ -z "${!var}" ]]; then echo "missing argument ${var}" ; return 1 ; fi ; done
}
function Init {
	mkdir -p ${v_project_dir}/${catalog_type}/{sample,mapping,profiles}
	mkdir -p ${v_workdir}
	mkdir -p ${v_refdir}
}
function Send {
	cp $v_fastqgz1 $v_workdir
	cp $v_fastqgz2 $v_workdir
	cp -r ${reference_dir}/* $v_refdir
	cp -r $trimFasta $v_project_dir
}
function Decompress {
	zcat ${v_workdir}/$(basename $v_fastqgz1) > $v_fastqgz1_unzip & pid1=$!
	zcat ${v_workdir}/$(basename $v_fastqgz2) > $v_fastqgz2_unzip & pid2=$!
	trap "kill -2 $pid1 $pid2" SIGINT
	wait
}
function Trim {
	[[ -f $v_fastqgz1_unzip && -f $v_fastqgz2_unzip ]] \
	|| (echo "zip file not found" ; return 1 )
	java -jar ${ALIEN_TRIMMER}/AlienTrimmer.jar \
		-k 10 -l 45 -m 5 -p 40 -q 20 \
		-if ${v_fastqgz1_unzip} -ir ${v_fastqgz2_unzip} -c $TMPDIR/$(basename $trimFasta) \
		-of ${v_final1} -or ${v_final2} -os ${v_trimmedS} \
	|| return 1
}
function Import {
	[[ -f $v_final1 && -f $v_final2 ]] \
	|| (echo "trimmed files not found" ; return 1 )
	mv ${v_final1} ${v_final2} ${v_project_dir}/${catalog_type}/sample &&
	rm -r ${v_workdir}
	ruby ${meteorImportScript} \
		-i ${v_project_dir}/${catalog_type}/sample \
		-p ${catalog_type} \
		-t ${seq_platform} \
		-m "${sampleId}*" \
	|| return 1
}
function Map_reads {
	ruby ${meteor}/meteor.rb \
		-w ${ini_file} \
		-i ${v_sampledir} \
		-p ${v_project_dir}/${catalog_type} \
		-o mapping \
	|| return 1
}
function Quantify {
	${meteor}/meteor-profiler \
		-p ${v_project_dir}/${catalog_type} \
		-f ${v_project_dir}/${catalog_type}/profiles \
		-t smart_shared_reads \
		-w ${ini_file} \
		-o ${sampleId} ${v_project_dir}/${catalog_type}/mapping/${sampleId}/${sampleId}_${v_prefix}_gene_profile/census.dat \
	&& rm -r ${v_project_dir}/${catalog_type}/mapping/${sampleId} \
	|| return 1
}
function Recover {
	rsync -aurvP --remove-source-files $v_project_dir/ $project_dir_rel
}

Main() {
	sampleId=$(basename $1 .fastq.gz)
	fastqgzs+=("$2")
	fastqgzs+=("$3")

	Run Parse_variables &&
	Run Init &&
	Run Send &&
	Run Decompress &&
	Run Trim &&
	Run Import &&
	Run Map_reads &&
	Run Quantify &&
	Run Recover
}

echo "...$(date): - begin running script"
cat $0
echo ""

# Load modules
echo "...$(date): - load modules"
module load bioinfo-tools
module load ruby/2.6.2
module load AlienTrimmer/0.4.0
module load bowtie2/2.3.4.1
echo "...$(date): - done"; echo "" 

# Load ini file
echo "...$(date): - load ini file"
sed -i "s|meteor.reference.dir=.*|meteor.reference.dir=$TMPDIR/reference|g" $1
ini_file=$1
source $ini_file > /dev/null 2>&1
v_prefix=$( grep "meteor.counting.prefix.name" $ini_file | sed "s/^.*=//g" )
cat $ini_file
echo "...$(date): - done"; echo "" 

# Run meteor
Main $sample $seq_data_dir/${sample}${forward_identifier} $seq_data_dir/${sample}${reverse_identifier}

...Thu Jun 10 13:41:57 CEST 2021: - load modules
Bowtie2 looks for the specified index first in the current directory, then in the directory specified in the BOWTIE2_INDEXES environment variable.
The pregenerated indexes for the reference genonomes are placed under /sw/data/reference/*/*/program_files/bowtie2 for each reference genome
...Thu Jun 10 13:42:08 CEST 2021: - done

...Thu Jun 10 13:42:08 CEST 2021: - load ini file
[Pipeline]
sample=P18161_235/02-FASTQ/201104_A00187_0373_BHGM2CDSXY/P18161_235_S107_L004
forward_identifier="_R1_001.fastq.gz"
reverse_identifier="_R2_001.fastq.gz"
seq_data_dir="/proj/snic2020-6-153/delivery04021/P18161"
project_dir_rel="/proj/uppstore2019028/projects/metagenome/theo/newscripts/tmp"
catalog_type="oral_catalog"
seq_platform="illumina"
trimFasta="/proj/uppstore2019028/projects/metagenome/alienTrimmerPF8contaminants.fasta"
meteorImportScript="/proj/uppstore2019028/meteor.2019.11.04/MeteorImportFastq.rb"
meteor="/proj/uppstore2019028/projects/metagenome/software/meteor_linux_2019.11.04"
Rdir="/proj/uppstore2019028/projects/metagenome/meteor_downstream_rscripts"
reference_dir="/proj/uppstore2019028/projects/metagenome/meteor_ref"
[worksession]
meteor.reference.dir=/scratch/20410269/reference
meteor.db.type=binary
meteor.nb.attempts=3
meteor.read.cleaning.program=none
meteor.read.cleaning.cmd=
meteor.mapping.program=bowtie2
meteor.mapping.file.format=sam
meteor.is.cpu.percentage=0
meteor.cpu.count=10
meteor.checksum=md5
meteor.excluded.reference.count=3
[main_reference]
meteor.reference.name=oral_catalog
meteor.matches=10000
meteor.mismatches=5
meteor.is.perc.mismatches=1
meteor.bestalignment=1
meteor.mapper.cmd=
meteor.mapping.prefix.name=mapping_vs_oral_catalog
meteor.counting.prefix.name=vs_hs_10_4_oral_catalog
[excluded_reference_1]
meteor.reference.name=Homo_sapiens_GRCh38
meteor.matches=1
meteor.mismatches=5
meteor.is.perc.mismatches=1
meteor.bestalignment=1
meteor.mapping.prefix.name=mapping_vs_Homo_sapiens_GRCh38
[excluded_reference_2]
meteor.reference.name=A_thaliana_TAIR10
meteor.matches=1
meteor.mismatches=5
meteor.is.perc.mismatches=1
meteor.bestalignment=1
meteor.mapping.prefix.name=mapping_vs_A_thaliana_TAIR10
[excluded_reference_3]
meteor.reference.name=Bos_taurus_UMD3
meteor.matches=1
meteor.mismatches=5
meteor.is.perc.mismatches=1
meteor.bestalignment=1
meteor.mapping.prefix.name=mapping_vs_Bos_taurus_UMD3
...Thu Jun 10 13:42:08 CEST 2021: - done

...Thu Jun 10 13:42:08 CEST 2021: Parse_variables - begin

v_downstream_dir=/scratch/20410269/Downstream
v_fastqgz1=/crex/proj/snic2020-6-153/nobackup/delivery04021/P18161/P18161_235/02-FASTQ/201104_A00187_0373_BHGM2CDSXY/P18161_235_S107_L004_R1_001.fastq.gz
v_fastqgz1_unzip=/scratch/20410269/working/P18161_235_S107_L004_R1_001.fastq.unzipped
v_fastqgz2=/crex/proj/snic2020-6-153/nobackup/delivery04021/P18161/P18161_235/02-FASTQ/201104_A00187_0373_BHGM2CDSXY/P18161_235_S107_L004_R2_001.fastq.gz
v_fastqgz2_unzip=/scratch/20410269/working/P18161_235_S107_L004_R2_001.fastq.unzipped
v_final1=/scratch/20410269/working/P18161_235_S107_L004_1.fastq
v_final2=/scratch/20410269/working/P18161_235_S107_L004_2.fastq
v_prefix=vs_hs_10_4_oral_catalog
v_project_dir=/scratch/20410269
v_refdir=/scratch/20410269/reference
v_sampledir=/scratch/20410269/oral_catalog/sample/P18161_235_S107_L004
v_trimmedS=/scratch/20410269/working/P18161_235_S107_L004.trimmed.s.fastq
v_workdir=/scratch/20410269/working
...Thu Jun 10 13:42:08 CEST 2021: Parse_variables - done

...time taken: 1623325322

...Thu Jun 10 13:42:08 CEST 2021: Init - begin

...Thu Jun 10 13:42:08 CEST 2021: Init - done

...time taken: 1623325322

...Thu Jun 10 13:42:08 CEST 2021: Send - begin

...Thu Jun 10 13:55:52 CEST 2021: Send - done

...time taken: 1623326146

...Thu Jun 10 13:55:52 CEST 2021: Decompress - begin

...Thu Jun 10 14:11:38 CEST 2021: Decompress - done

...time taken: 1623327092

...Thu Jun 10 14:11:38 CEST 2021: Trim - begin

AlienTrimmer main options: -k 10 -l 45 -m 5 -q 20 -p 40 (Phred+33)  /  439 fwd alien sequence(s)  /  7856 fwd k-mers (k=10)  /  439 rev alien sequence(s)  /  7856 rev k-mers (k=10)
[01:55]   1,000,000 read pairs processed:     627,529 trimmed (fwd:     290,158  rev:     337,371)      10,599 removed (fwd:       3,086  rev:       7,513)
[03:50]   2,000,000 read pairs processed:   1,245,030 trimmed (fwd:     568,608  rev:     676,422)      21,131 removed (fwd:       5,706  rev:      15,425)
[05:45]   3,000,000 read pairs processed:   1,861,430 trimmed (fwd:     845,313  rev:   1,016,117)      32,037 removed (fwd:       8,303  rev:      23,734)
[07:43]   4,000,000 read pairs processed:   2,493,486 trimmed (fwd:   1,122,406  rev:   1,371,080)      43,454 removed (fwd:      10,685  rev:      32,769)
[09:42]   5,000,000 read pairs processed:   3,118,251 trimmed (fwd:   1,391,327  rev:   1,726,924)      55,924 removed (fwd:      12,752  rev:      43,172)
[12:42]   6,000,000 read pairs processed:   3,752,603 trimmed (fwd:   1,663,104  rev:   2,089,499)      72,203 removed (fwd:      14,839  rev:      57,364)
[14:42]   7,000,000 read pairs processed:   4,368,583 trimmed (fwd:   1,947,387  rev:   2,421,196)      81,586 removed (fwd:      17,528  rev:      64,058)
[16:42]   8,000,000 read pairs processed:   4,976,659 trimmed (fwd:   2,221,482  rev:   2,755,177)      91,068 removed (fwd:      19,908  rev:      71,160)
[18:43]   9,000,000 read pairs processed:   5,588,810 trimmed (fwd:   2,494,939  rev:   3,093,871)     100,800 removed (fwd:      22,300  rev:      78,500)
[20:45]  10,000,000 read pairs processed:   6,202,326 trimmed (fwd:   2,766,068  rev:   3,436,258)     110,999 removed (fwd:      24,476  rev:      86,523)
[22:50]  11,000,000 read pairs processed:   6,823,928 trimmed (fwd:   3,034,224  rev:   3,789,704)     122,950 removed (fwd:      26,510  rev:      96,440)
[24:56]  12,000,000 read pairs processed:   7,461,934 trimmed (fwd:   3,306,892  rev:   4,155,042)     138,660 removed (fwd:      28,581  rev:     110,079)
[26:58]  13,000,000 read pairs processed:   8,081,857 trimmed (fwd:   3,590,192  rev:   4,491,665)     148,051 removed (fwd:      31,220  rev:     116,831)
[29:01]  14,000,000 read pairs processed:   8,687,786 trimmed (fwd:   3,862,325  rev:   4,825,461)     158,005 removed (fwd:      33,509  rev:     124,496)
[31:03]  15,000,000 read pairs processed:   9,301,570 trimmed (fwd:   4,133,975  rev:   5,167,595)     168,701 removed (fwd:      35,952  rev:     132,749)
[33:05]  16,000,000 read pairs processed:   9,917,150 trimmed (fwd:   4,403,317  rev:   5,513,833)     179,649 removed (fwd:      38,130  rev:     141,519)
[35:07]  17,000,000 read pairs processed:  10,541,463 trimmed (fwd:   4,671,508  rev:   5,869,955)     191,806 removed (fwd:      40,144  rev:     151,662)
[37:09]  18,000,000 read pairs processed:  11,176,465 trimmed (fwd:   4,942,612  rev:   6,233,853)     206,158 removed (fwd:      41,987  rev:     164,171)
[39:11]  19,000,000 read pairs processed:  11,771,953 trimmed (fwd:   5,213,376  rev:   6,558,577)     215,332 removed (fwd:      44,424  rev:     170,908)
[41:12]  20,000,000 read pairs processed:  12,371,799 trimmed (fwd:   5,480,106  rev:   6,891,693)     224,899 removed (fwd:      46,665  rev:     178,234)
[43:13]  21,000,000 read pairs processed:  12,975,361 trimmed (fwd:   5,746,799  rev:   7,228,562)     234,961 removed (fwd:      48,844  rev:     186,117)
[45:14]  22,000,000 read pairs processed:  13,582,855 trimmed (fwd:   6,012,364  rev:   7,570,491)     245,412 removed (fwd:      50,954  rev:     194,458)
[47:16]  23,000,000 read pairs processed:  14,195,930 trimmed (fwd:   6,278,653  rev:   7,917,277)     256,228 removed (fwd:      52,888  rev:     203,340)
[49:20]  24,000,000 read pairs processed:  14,827,409 trimmed (fwd:   6,548,099  rev:   8,279,310)     269,147 removed (fwd:      54,728  rev:     214,419)
[51:19]  25,000,000 read pairs processed:  15,440,627 trimmed (fwd:   6,824,720  rev:   8,615,907)     278,591 removed (fwd:      57,301  rev:     221,290)
[53:23]  26,000,000 read pairs processed:  16,042,081 trimmed (fwd:   7,090,425  rev:   8,951,656)     288,146 removed (fwd:      59,628  rev:     228,518)
[55:26]  27,000,000 read pairs processed:  16,655,696 trimmed (fwd:   7,359,360  rev:   9,296,336)     297,749 removed (fwd:      61,805  rev:     235,944)
[57:29]  28,000,000 read pairs processed:  17,269,297 trimmed (fwd:   7,627,031  rev:   9,642,266)     307,699 removed (fwd:      64,074  rev:     243,625)
[59:36]  29,000,000 read pairs processed:  17,884,726 trimmed (fwd:   7,894,651  rev:   9,990,075)     317,728 removed (fwd:      66,082  rev:     251,646)
[61:42]  30,000,000 read pairs processed:  18,502,976 trimmed (fwd:   8,160,593  rev:  10,342,383)     328,712 removed (fwd:      67,855  rev:     260,857)
[63:44]  31,000,000 read pairs processed:  19,117,405 trimmed (fwd:   8,445,950  rev:  10,671,455)     338,923 removed (fwd:      71,018  rev:     267,905)
[65:48]  32,000,000 read pairs processed:  19,720,980 trimmed (fwd:   8,720,464  rev:  11,000,516)     348,896 removed (fwd:      73,802  rev:     275,094)
[67:53]  33,000,000 read pairs processed:  20,325,063 trimmed (fwd:   8,994,764  rev:  11,330,299)     359,170 removed (fwd:      76,491  rev:     282,679)
[69:56]  34,000,000 read pairs processed:  20,920,217 trimmed (fwd:   9,263,327  rev:  11,656,890)     368,908 removed (fwd:      79,009  rev:     289,899)
[72:24]  35,000,000 read pairs processed:  21,518,072 trimmed (fwd:   9,528,696  rev:  11,989,376)     378,618 removed (fwd:      81,152  rev:     297,466)
[74:28]  36,000,000 read pairs processed:  22,135,566 trimmed (fwd:   9,798,479  rev:  12,337,087)     388,769 removed (fwd:      83,163  rev:     305,606)
[76:31]  37,000,000 read pairs processed:  22,915,613 trimmed (fwd:  10,149,150  rev:  12,766,463)     401,474 removed (fwd:      85,797  rev:     315,677)
[78:33]  38,000,000 read pairs processed:  23,662,882 trimmed (fwd:  10,481,087  rev:  13,181,795)     415,333 removed (fwd:      88,321  rev:     327,012)
[80:35]  39,000,000 read pairs processed:  24,329,974 trimmed (fwd:  10,783,875  rev:  13,546,099)     425,086 removed (fwd:      91,263  rev:     333,823)
[82:37]  40,000,000 read pairs processed:  24,979,948 trimmed (fwd:  11,075,827  rev:  13,904,121)     434,250 removed (fwd:      93,786  rev:     340,464)
[84:50]  41,000,000 read pairs processed:  25,621,655 trimmed (fwd:  11,358,777  rev:  14,262,878)     444,215 removed (fwd:      95,945  rev:     348,270)
[87:41]  42,000,000 read pairs processed:  26,335,622 trimmed (fwd:  11,677,897  rev:  14,657,725)     455,000 removed (fwd:      98,521  rev:     356,479)
[93:45]  43,000,000 read pairs processed:  27,044,768 trimmed (fwd:  11,993,186  rev:  15,051,582)     465,058 removed (fwd:     100,961  rev:     364,097)
[101:57]  44,000,000 read pairs processed:  27,728,914 trimmed (fwd:  12,296,499  rev:  15,432,415)     474,544 removed (fwd:     103,529  rev:     371,015)
[110:42]  45,000,000 read pairs processed:  28,381,472 trimmed (fwd:  12,585,365  rev:  15,796,107)     483,541 removed (fwd:     106,036  rev:     377,505)
[119:51]  46,000,000 read pairs processed:  29,023,200 trimmed (fwd:  12,865,429  rev:  16,157,771)     492,837 removed (fwd:     108,201  rev:     384,636)
[128:23]  47,000,000 read pairs processed:  29,676,331 trimmed (fwd:  13,155,223  rev:  16,521,108)     503,066 removed (fwd:     110,552  rev:     392,514)
[136:13]  48,000,000 read pairs processed:  30,348,078 trimmed (fwd:  13,460,383  rev:  16,887,695)     512,295 removed (fwd:     113,256  rev:     399,039)
[145:08]  49,000,000 read pairs processed:  31,010,728 trimmed (fwd:  13,758,749  rev:  17,251,979)     521,734 removed (fwd:     115,848  rev:     405,886)
[153:34]  50,000,000 read pairs processed:  31,662,935 trimmed (fwd:  14,051,761  rev:  17,611,174)     530,716 removed (fwd:     118,530  rev:     412,186)
[161:24]  51,000,000 read pairs processed:  32,296,251 trimmed (fwd:  14,333,006  rev:  17,963,245)     539,545 removed (fwd:     120,920  rev:     418,625)
[169:55]  52,000,000 read pairs processed:  32,929,739 trimmed (fwd:  14,610,931  rev:  18,318,808)     548,956 removed (fwd:     122,900  rev:     426,056)
[177:40]  53,000,000 read pairs processed:  33,583,630 trimmed (fwd:  14,901,850  rev:  18,681,780)     558,039 removed (fwd:     125,433  rev:     432,606)
[186:02]  54,000,000 read pairs processed:  34,224,976 trimmed (fwd:  15,190,170  rev:  19,034,806)     566,803 removed (fwd:     128,023  rev:     438,780)
[194:09]  55,000,000 read pairs processed:  34,866,023 trimmed (fwd:  15,475,466  rev:  19,390,557)     575,726 removed (fwd:     130,657  rev:     445,069)
[202:09]  56,000,000 read pairs processed:  35,506,074 trimmed (fwd:  15,759,142  rev:  19,746,932)     584,457 removed (fwd:     133,181  rev:     451,276)
[210:12]  57,000,000 read pairs processed:  36,139,687 trimmed (fwd:  16,036,061  rev:  20,103,626)     592,985 removed (fwd:     135,314  rev:     457,671)
[218:20]  58,000,000 read pairs processed:  36,773,976 trimmed (fwd:  16,313,678  rev:  20,460,298)     602,256 removed (fwd:     137,385  rev:     464,871)
[226:30]  59,000,000 read pairs processed:  37,429,089 trimmed (fwd:  16,611,691  rev:  20,817,398)     611,252 removed (fwd:     140,143  rev:     471,109)
[234:28]  60,000,000 read pairs processed:  38,076,610 trimmed (fwd:  16,904,000  rev:  21,172,610)     620,240 removed (fwd:     142,780  rev:     477,460)
[242:52]  61,000,000 read pairs processed:  38,725,268 trimmed (fwd:  17,195,366  rev:  21,529,902)     629,300 removed (fwd:     145,439  rev:     483,861)
[250:44]  62,000,000 read pairs processed:  39,364,053 trimmed (fwd:  17,481,405  rev:  21,882,648)     638,247 removed (fwd:     147,987  rev:     490,260)
[259:32]  63,000,000 read pairs processed:  39,996,445 trimmed (fwd:  17,761,094  rev:  22,235,351)     646,904 removed (fwd:     150,039  rev:     496,865)
[267:36]  64,000,000 read pairs processed:  40,679,122 trimmed (fwd:  18,065,044  rev:  22,614,078)     657,629 removed (fwd:     152,792  rev:     504,837)
[273:56]  65,000,000 read pairs processed:  41,370,328 trimmed (fwd:  18,379,090  rev:  22,991,238)     668,235 removed (fwd:     156,225  rev:     512,010)
[276:47]  66,000,000 read pairs processed:  42,045,955 trimmed (fwd:  18,683,087  rev:  23,362,868)     678,615 removed (fwd:     159,459  rev:     519,156)
[279:13]  67,000,000 read pairs processed:  42,698,014 trimmed (fwd:  18,978,179  rev:  23,719,835)     688,133 removed (fwd:     162,641  rev:     525,492)
[281:31]  68,000,000 read pairs processed:  43,338,026 trimmed (fwd:  19,262,261  rev:  24,075,765)     696,645 removed (fwd:     165,036  rev:     531,609)
[283:42]  68,927,804 read pairs processed:  43,922,420 trimmed (fwd:  19,518,794  rev:  24,403,626)     704,602 removed (fwd:     166,966  rev:     537,636)
...Thu Jun 10 18:55:20 CEST 2021: Trim - done

...time taken: 1623344114

...Thu Jun 10 18:55:20 CEST 2021: Import - begin

ruby: warning: shebang line ending with \r may cause problems
Import /scratch/20410269/oral_catalog/sample/P18161_235_S107_L004_1.fastq
Import /scratch/20410269/oral_catalog/sample/P18161_235_S107_L004_2.fastq
Importation done!
...Thu Jun 10 18:55:32 CEST 2021: Import - done

...time taken: 1623344126

...Thu Jun 10 18:55:32 CEST 2021: Map_reads - begin

/proj/uppstore2019028/projects/metagenome/software/meteor_linux_2019.11.04/meteor.rb:146: warning: constant ::Fixnum is deprecated
/proj/uppstore2019028/projects/metagenome/software/meteor_linux_2019.11.04/meteor.rb:161: warning: Insecure world writable dir /proj/uppstore2019028/Helen/meteor-linux.2019-11-04 in PATH, mode 042777

Launch mapping


######### Meteor Mapping task description
Sample name = P18161_235_S107_L004
Library name = P18161_235_S107_L004_1
Project name = oral_catalog
Sequencing device = illumina
Workflow = P18161_235_S107_L004.ini

######### Task main mapping 0
Executing mapping command:
bowtie2-align-l --mm -p 10 --end-to-end --sensitive -k 10000 --no-head --no-sq --no-unal --omit-sec-seq -x /scratch/20410269/reference/oral_catalog/fasta/oral_catalog_dnaspace_index -U /scratch/20410269/oral_catalog/sample/P18161_235_S107_L004/1ad01ab76ffce6641ac480b48330aed9/P18161_235_S107_L004_1.fastq.idx -S /scratch/20410269/oral_catalog/mapping/P18161_235_S107_L004/mapping_vs_oral_catalog_P18161_235_S107_L004_1/P18161_235_S107_L004_1_1.sam
68250237 reads; of these:
  68250237 (100.00%) were unpaired; of these:
    19540975 (28.63%) aligned 0 times
    9183327 (13.46%) aligned exactly 1 time
    39525935 (57.91%) aligned >1 times
71.37% overall alignment rate

######### TaskExcludedMapping(0, 1) ; reference name: Homo_sapiens_GRCh38
Executing mapping command:
bowtie2-align-l --mm -p 10 --end-to-end --sensitive -k 1 --no-head --no-sq --no-unal --omit-sec-seq -x /scratch/20410269/reference/Homo_sapiens_GRCh38/fasta/Homo_sapiens_GRCh38_dnaspace_index -U /scratch/20410269/oral_catalog/sample/P18161_235_S107_L004/1ad01ab76ffce6641ac480b48330aed9/P18161_235_S107_L004_1.fastq.idx -S /scratch/20410269/oral_catalog/mapping/P18161_235_S107_L004/mapping_vs_Homo_sapiens_GRCh38_P18161_235_S107_L004_1/P18161_235_S107_L004_1_1.sam
68250237 reads; of these:
  68250237 (100.00%) were unpaired; of these:
    55816271 (81.78%) aligned 0 times
    12433966 (18.22%) aligned exactly 1 time
    0 (0.00%) aligned >1 times
18.22% overall alignment rate

######### TaskExcludedMapping(0, 2) ; reference name: A_thaliana_TAIR10
Executing mapping command:
bowtie2-align-l --mm -p 10 --end-to-end --sensitive -k 1 --no-head --no-sq --no-unal --omit-sec-seq -x /scratch/20410269/reference/A_thaliana_TAIR10/fasta/A_thaliana_TAIR10_dnaspace_index -U /scratch/20410269/oral_catalog/sample/P18161_235_S107_L004/1ad01ab76ffce6641ac480b48330aed9/P18161_235_S107_L004_1.fastq.idx -S /scratch/20410269/oral_catalog/mapping/P18161_235_S107_L004/mapping_vs_A_thaliana_TAIR10_P18161_235_S107_L004_1/P18161_235_S107_L004_1_1.sam
68250237 reads; of these:
  68250237 (100.00%) were unpaired; of these:
    68231362 (99.97%) aligned 0 times
    18875 (0.03%) aligned exactly 1 time
    0 (0.00%) aligned >1 times
0.03% overall alignment rate

######### TaskExcludedMapping(0, 3) ; reference name: Bos_taurus_UMD3
Executing mapping command:
bowtie2-align-l --mm -p 10 --end-to-end --sensitive -k 1 --no-head --no-sq --no-unal --omit-sec-seq -x /scratch/20410269/reference/Bos_taurus_UMD3/fasta/Bos_taurus_UMD3_dnaspace_index -U /scratch/20410269/oral_catalog/sample/P18161_235_S107_L004/1ad01ab76ffce6641ac480b48330aed9/P18161_235_S107_L004_1.fastq.idx -S /scratch/20410269/oral_catalog/mapping/P18161_235_S107_L004/mapping_vs_Bos_taurus_UMD3_P18161_235_S107_L004_1/P18161_235_S107_L004_1_1.sam
68250237 reads; of these:
  68250237 (100.00%) were unpaired; of these:
    68006363 (99.64%) aligned 0 times
    243874 (0.36%) aligned exactly 1 time
    0 (0.00%) aligned >1 times
0.36% overall alignment rate
removing re-indexed file:
/scratch/20410269/oral_catalog/sample/P18161_235_S107_L004/1ad01ab76ffce6641ac480b48330aed9/P18161_235_S107_L004_1.fastq.idx


######### Meteor Mapping task description
Sample name = P18161_235_S107_L004
Library name = P18161_235_S107_L004_2
Project name = oral_catalog
Sequencing device = illumina
Workflow = P18161_235_S107_L004.ini

######### Task main mapping 1
Executing mapping command:
bowtie2-align-l --mm -p 10 --end-to-end --sensitive -k 10000 --no-head --no-sq --no-unal --omit-sec-seq -x /scratch/20410269/reference/oral_catalog/fasta/oral_catalog_dnaspace_index -U /scratch/20410269/oral_catalog/sample/P18161_235_S107_L004/1ad01ab76ffce6641ac480b48330aed9/P18161_235_S107_L004_2.fastq.idx -S /scratch/20410269/oral_catalog/mapping/P18161_235_S107_L004/mapping_vs_oral_catalog_P18161_235_S107_L004_2/P18161_235_S107_L004_2_1.sam
