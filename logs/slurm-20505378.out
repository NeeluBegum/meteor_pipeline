...Mon Jun 14 16:14:27 CEST 2021: - begin running script
#!/bin/bash -l
#SBATCH --account=snic2021-5-248
#SBATCH --partition=core
#SBATCH --ntasks=10
#SBATCH --time=2-06:00:00
#SBATCH --job-name=FmtLast
##SBATCH --output=%j 
##SBATCH --mail-user=zn.tportlock@gmail.com
##SBATCH --mail-type=ALL

function Run {
	#start=$(date +%M)
	#echo "...$(date): $1 - begin"; echo ""
	$@ \
	&& (echo "...$(date): $1 - done") \
	|| (echo "...$(date): $1 - failed"; return 1)
	#end=$(date +%M)
	#echo "...time taken: $((end-start))"; echo ""
}
function Parse_variables {
	sampleId=$(basename $sample .fastq.gz)
	v_project_dir="$TMPDIR"
	v_prefix=$( grep "meteor.counting.prefix.name" $ini_file | sed "s/^.*=//g" )
	v_workdir="${v_project_dir}/working"
	v_refdir="${v_project_dir}/reference"
	v_fastqgz1="$(readlink -f $seq_data_dir/${sample}${forward_identifier})"
	v_fastqgz2="$(readlink -f $seq_data_dir/${sample}${reverse_identifier})"
	v_fastqgz1_unzip="${v_workdir}/$(basename $v_fastqgz1 .gz).unzipped"
	v_fastqgz2_unzip="${v_workdir}/$(basename $v_fastqgz2 .gz).unzipped"
	v_trimmedS="${v_workdir}/${sampleId}.trimmed.s.fastq"
	v_final1="${v_workdir}/${sampleId}_1.fastq"
	v_final2="${v_workdir}/${sampleId}_2.fastq"
	v_sampledir="${v_project_dir}/${catalog_type}/sample/${sampleId}"
	vars="$(compgen -A variable | grep "^v_.*")"
	for var in ${vars}; do echo "${var}=${!var}"; done
	for var in ${vars}; do if [[ -z "${!var}" ]]; then echo "missing argument ${var}" ; return 1 ; fi ; done
}
function Init {
	mkdir -p ${v_project_dir}/${catalog_type}/{sample,mapping,profiles}
	mkdir -p ${v_workdir}
	mkdir -p ${v_refdir}
}
function Send {
	cp $v_fastqgz1 $v_workdir
	cp $v_fastqgz2 $v_workdir
	cp -r ${reference_dir}/* $v_refdir
	cp -r $trimFasta $v_project_dir
}
function Decompress {
	zcat ${v_workdir}/$(basename $v_fastqgz1) > $v_fastqgz1_unzip & pid1=$!
	zcat ${v_workdir}/$(basename $v_fastqgz2) > $v_fastqgz2_unzip & pid2=$!
	trap "kill -2 $pid1 $pid2" SIGINT
	wait
}
function Trim {
	[[ -f $v_fastqgz1_unzip && -f $v_fastqgz2_unzip ]] \
	|| (echo "zip file not found" ; return 1 )
	java -jar ${ALIEN_TRIMMER}/AlienTrimmer.jar \
		-k 10 -l 45 -m 5 -p 40 -q 20 \
		-if ${v_fastqgz1_unzip} -ir ${v_fastqgz2_unzip} -c $TMPDIR/$(basename $trimFasta) \
		-of ${v_final1} -or ${v_final2} -os ${v_trimmedS} \
	|| return 1
}
function Import {
	[[ -f $v_final1 && -f $v_final2 ]] \
	|| (echo "trimmed files not found" ; return 1 )
	mv ${v_final1} ${v_final2} ${v_project_dir}/${catalog_type}/sample &&
	rm -r ${v_workdir}
	ruby ${meteor_rep}/data_preparation_tools/MeteorImportFastq.rb \
		-i ${v_project_dir}/${catalog_type}/sample \
		-p ${catalog_type} \
		-t ${seq_platform} \
		-m "${sampleId}*" \
	|| return 1
}
function Map_reads {
	ruby ${meteor_rep}/meteor-pipeline/meteor.rb \
		-w ${ini_file} \
		-i ${v_sampledir} \
		-p ${v_project_dir}/${catalog_type} \
		-o mapping \
	|| return 1
}
function Quantify {
	${meteor_rep}/meteor-pipeline/src/build/meteor-profiler \
		-p ${v_project_dir}/${catalog_type} \
		-f ${v_project_dir}/${catalog_type}/profiles \
		-t smart_shared_reads \
		-w ${ini_file} \
		-o ${sampleId} ${v_project_dir}/${catalog_type}/mapping/${sampleId}/${sampleId}_${v_prefix}_gene_profile/census.dat \
	&& rm -r ${v_project_dir}/${catalog_type}/mapping/${sampleId} \
	|| return 1
}
function Recover {
	rm $TMPDIR/$(basename $trimFasta)
	rm -r ${v_workdir}
	rm -r ${v_refdir}
	rm $ini_file
	rsync -aurvP --remove-source-files $v_project_dir/ $project_dir_rel
}

Main() {
	Run Parse_variables &&
	Run Init &&
	Run Send &&
	Run Decompress &&
	Run Trim &&
	Run Import &&
	Run Map_reads &&
	Run Quantify &&
	Run Recover
}

echo "...$(date): - begin running script"
cat $0
echo ""

# Load modules
echo "...$(date): - load modules"
module load bioinfo-tools
module load ruby/2.6.2
module load AlienTrimmer/0.4.0
module load bowtie2/2.3.4.1
echo "...$(date): - done"; echo "" 

# Load ini file
echo "...$(date): - load ini file"
echo $TMPDIR/$(basename $1)
sed "s|meteor.reference.dir=.*|meteor.reference.dir=$TMPDIR/reference|g" $1 > $TMPDIR/$(basename $1)
ini_file=$TMPDIR/$(basename $1)
source $ini_file > /dev/null 2>&1
cat $ini_file
echo "...$(date): - done"; echo "" 

# Run
Main

...Mon Jun 14 16:14:27 CEST 2021: - load modules
Bowtie2 looks for the specified index first in the current directory, then in the directory specified in the BOWTIE2_INDEXES environment variable.
The pregenerated indexes for the reference genonomes are placed under /sw/data/reference/*/*/program_files/bowtie2 for each reference genome
...Mon Jun 14 16:14:33 CEST 2021: - done

...Mon Jun 14 16:14:33 CEST 2021: - load ini file
/scratch/20505378/workflow.ini
[Pipeline]
sample=P18161_205/02-FASTQ/201104_A00187_0373_BHGM2CDSXY/P18161_205_S79_L004
forward_identifier="_R1_001.fastq.gz"
reverse_identifier="_R2_001.fastq.gz"
seq_data_dir="/proj/snic2020-6-153/delivery04021/P18161"
project_dir_rel="/proj/uppstore2019028/projects/metagenome/theo/newscripts/removeafter"
catalog_type="oral_catalog"
seq_platform="illumina"
trimFasta="/proj/uppstore2019028/projects/metagenome/alienTrimmerPF8contaminants.fasta"
meteor_rep="/proj/uppstore2019028/projects/metagenome/software/meteor"
Rdir="/proj/uppstore2019028/projects/metagenome/meteor_downstream_rscripts"
reference_dir="/proj/uppstore2019028/projects/metagenome/meteor_ref"
[worksession]
meteor.reference.dir=/scratch/20505378/reference
meteor.db.type=binary
meteor.nb.attempts=3
meteor.read.cleaning.program=none
meteor.read.cleaning.cmd=
meteor.mapping.program=bowtie2
meteor.mapping.file.format=sam
meteor.is.cpu.percentage=0
meteor.cpu.count=10
meteor.checksum=md5
meteor.excluded.reference.count=3
[main_reference]
meteor.reference.name=oral_catalog
meteor.matches=10000
meteor.mismatches=5
meteor.is.perc.mismatches=1
meteor.bestalignment=1
meteor.mapper.cmd=
meteor.mapping.prefix.name=mapping_vs_oral_catalog
meteor.counting.prefix.name=vs_hs_10_4_oral_catalog
[excluded_reference_1]
meteor.reference.name=Homo_sapiens_GRCh38
meteor.matches=1
meteor.mismatches=5
meteor.is.perc.mismatches=1
meteor.bestalignment=1
meteor.mapping.prefix.name=mapping_vs_Homo_sapiens_GRCh38
[excluded_reference_2]
meteor.reference.name=A_thaliana_TAIR10
meteor.matches=1
meteor.mismatches=5
meteor.is.perc.mismatches=1
meteor.bestalignment=1
meteor.mapping.prefix.name=mapping_vs_A_thaliana_TAIR10
[excluded_reference_3]
meteor.reference.name=Bos_taurus_UMD3
meteor.matches=1
meteor.mismatches=5
meteor.is.perc.mismatches=1
meteor.bestalignment=1
meteor.mapping.prefix.name=mapping_vs_Bos_taurus_UMD3
...Mon Jun 14 16:14:33 CEST 2021: - done

v_fastqgz1=/crex/proj/snic2020-6-153/nobackup/delivery04021/P18161/P18161_205/02-FASTQ/201104_A00187_0373_BHGM2CDSXY/P18161_205_S79_L004_R1_001.fastq.gz
v_fastqgz1_unzip=/scratch/20505378/working/P18161_205_S79_L004_R1_001.fastq.unzipped
v_fastqgz2=/crex/proj/snic2020-6-153/nobackup/delivery04021/P18161/P18161_205/02-FASTQ/201104_A00187_0373_BHGM2CDSXY/P18161_205_S79_L004_R2_001.fastq.gz
v_fastqgz2_unzip=/scratch/20505378/working/P18161_205_S79_L004_R2_001.fastq.unzipped
v_final1=/scratch/20505378/working/P18161_205_S79_L004_1.fastq
v_final2=/scratch/20505378/working/P18161_205_S79_L004_2.fastq
v_prefix=vs_hs_10_4_oral_catalog
v_project_dir=/scratch/20505378
v_refdir=/scratch/20505378/reference
v_sampledir=/scratch/20505378/oral_catalog/sample/P18161_205_S79_L004
v_trimmedS=/scratch/20505378/working/P18161_205_S79_L004.trimmed.s.fastq
v_workdir=/scratch/20505378/working
...Mon Jun 14 16:14:33 CEST 2021: Parse_variables - done
...Mon Jun 14 16:14:33 CEST 2021: Init - done
...Mon Jun 14 16:22:12 CEST 2021: Send - done
...Mon Jun 14 16:28:17 CEST 2021: Decompress - done
AlienTrimmer main options: -k 10 -l 45 -m 5 -q 20 -p 40 (Phred+33)  /  439 fwd alien sequence(s)  /  7856 fwd k-mers (k=10)  /  439 rev alien sequence(s)  /  7856 rev k-mers (k=10)
[02:04]   1,000,000 read pairs processed:     641,756 trimmed (fwd:     300,204  rev:     341,552)      13,957 removed (fwd:       4,730  rev:       9,227)
[04:00]   2,000,000 read pairs processed:   1,292,863 trimmed (fwd:     596,263  rev:     696,600)      28,281 removed (fwd:       9,043  rev:      19,238)
[05:57]   3,000,000 read pairs processed:   1,938,382 trimmed (fwd:     891,942  rev:   1,046,440)      42,616 removed (fwd:      13,214  rev:      29,402)
[07:52]   4,000,000 read pairs processed:   2,575,834 trimmed (fwd:   1,186,024  rev:   1,389,810)      56,046 removed (fwd:      17,556  rev:      38,490)
[09:49]   5,000,000 read pairs processed:   3,221,331 trimmed (fwd:   1,476,371  rev:   1,744,960)      70,430 removed (fwd:      21,667  rev:      48,763)
[11:46]   6,000,000 read pairs processed:   3,859,463 trimmed (fwd:   1,772,238  rev:   2,087,225)      84,025 removed (fwd:      25,989  rev:      58,036)
[13:44]   7,000,000 read pairs processed:   4,498,598 trimmed (fwd:   2,062,316  rev:   2,436,282)      97,551 removed (fwd:      30,138  rev:      67,413)
[15:43]   8,000,000 read pairs processed:   5,139,579 trimmed (fwd:   2,353,078  rev:   2,786,501)     111,416 removed (fwd:      34,135  rev:      77,281)
[17:39]   9,000,000 read pairs processed:   5,766,385 trimmed (fwd:   2,640,801  rev:   3,125,584)     124,574 removed (fwd:      38,422  rev:      86,152)
[19:36]  10,000,000 read pairs processed:   6,401,819 trimmed (fwd:   2,928,211  rev:   3,473,608)     138,078 removed (fwd:      42,451  rev:      95,627)
[21:34]  11,000,000 read pairs processed:   7,039,235 trimmed (fwd:   3,219,564  rev:   3,819,671)     151,244 removed (fwd:      46,557  rev:     104,687)
[23:32]  12,000,000 read pairs processed:   7,675,448 trimmed (fwd:   3,507,541  rev:   4,167,907)     164,190 removed (fwd:      50,559  rev:     113,631)
[25:31]  13,000,000 read pairs processed:   8,316,975 trimmed (fwd:   3,799,166  rev:   4,517,809)     177,484 removed (fwd:      54,664  rev:     122,820)
[27:28]  14,000,000 read pairs processed:   8,944,429 trimmed (fwd:   4,092,113  rev:   4,852,316)     190,949 removed (fwd:      59,186  rev:     131,763)
[29:26]  15,000,000 read pairs processed:   9,566,707 trimmed (fwd:   4,378,401  rev:   5,188,306)     203,980 removed (fwd:      63,339  rev:     140,641)
[31:24]  16,000,000 read pairs processed:  10,314,585 trimmed (fwd:   4,720,487  rev:   5,594,098)     218,994 removed (fwd:      67,791  rev:     151,203)
[33:23]  17,000,000 read pairs processed:  11,034,862 trimmed (fwd:   5,051,802  rev:   5,983,060)     233,817 removed (fwd:      72,543  rev:     161,274)
[35:22]  18,000,000 read pairs processed:  11,754,677 trimmed (fwd:   5,380,700  rev:   6,373,977)     247,492 removed (fwd:      76,859  rev:     170,633)
[37:20]  19,000,000 read pairs processed:  12,475,201 trimmed (fwd:   5,707,108  rev:   6,768,093)     261,127 removed (fwd:      81,422  rev:     179,705)
[39:17]  20,000,000 read pairs processed:  13,160,855 trimmed (fwd:   6,016,657  rev:   7,144,198)     274,551 removed (fwd:      85,788  rev:     188,763)
[41:14]  21,000,000 read pairs processed:  13,866,337 trimmed (fwd:   6,342,713  rev:   7,523,624)     287,744 removed (fwd:      90,427  rev:     197,317)
[43:11]  22,000,000 read pairs processed:  14,540,495 trimmed (fwd:   6,649,847  rev:   7,890,648)     300,836 removed (fwd:      94,883  rev:     205,953)
[45:10]  23,000,000 read pairs processed:  15,220,081 trimmed (fwd:   6,960,331  rev:   8,259,750)     313,500 removed (fwd:      99,332  rev:     214,168)
[47:07]  24,000,000 read pairs processed:  15,893,139 trimmed (fwd:   7,265,491  rev:   8,627,648)     326,153 removed (fwd:     103,730  rev:     222,423)
[49:06]  25,000,000 read pairs processed:  16,569,352 trimmed (fwd:   7,573,581  rev:   8,995,771)     338,845 removed (fwd:     107,996  rev:     230,849)
[51:04]  26,000,000 read pairs processed:  17,252,411 trimmed (fwd:   7,887,603  rev:   9,364,808)     351,685 removed (fwd:     112,504  rev:     239,181)
[53:02]  27,000,000 read pairs processed:  17,929,483 trimmed (fwd:   8,195,685  rev:   9,733,798)     364,618 removed (fwd:     116,718  rev:     247,900)
[55:41]  28,000,000 read pairs processed:  18,653,544 trimmed (fwd:   8,528,608  rev:  10,124,936)     378,756 removed (fwd:     121,714  rev:     257,042)
[57:40]  29,000,000 read pairs processed:  19,332,282 trimmed (fwd:   8,838,132  rev:  10,494,150)     391,837 removed (fwd:     126,377  rev:     265,460)
[58:09]  29,249,881 read pairs processed:  19,499,204 trimmed (fwd:   8,913,283  rev:  10,585,921)     394,937 removed (fwd:     127,387  rev:     267,550)
...Mon Jun 14 17:26:56 CEST 2021: Trim - done
ruby: warning: shebang line ending with \r may cause problems
Import /scratch/20505378/oral_catalog/sample/P18161_205_S79_L004_2.fastq
Import /scratch/20505378/oral_catalog/sample/P18161_205_S79_L004_1.fastq
Importation done!
...Mon Jun 14 17:27:00 CEST 2021: Import - done
/proj/uppstore2019028/projects/metagenome/software/meteor/meteor-pipeline/meteor.rb:184: warning: constant ::Fixnum is deprecated
/proj/uppstore2019028/projects/metagenome/software/meteor/meteor-pipeline/meteor.rb:199: warning: Insecure world writable dir /proj/uppstore2019028/Helen/meteor-linux.2019-11-04 in PATH, mode 042777

Launch mapping


######### Meteor Mapping task description
Sample name = P18161_205_S79_L004
Library name = P18161_205_S79_L004_1
Project name = oral_catalog
Sequencing device = illumina
Workflow = workflow.ini

######### Task main mapping 0
Executing mapping command:
bowtie2-align-l --mm -p 10 --end-to-end --sensitive -k 10000 --no-head --no-sq --no-unal --omit-sec-seq -x /scratch/20505378/reference/oral_catalog/fasta/oral_catalog_dnaspace_index -U /scratch/20505378/oral_catalog/mapping/P18161_205_S79_L004/ce45392320e96628c188a48bd449cdc7/P18161_205_S79_L004_1.fastq.idx -S /scratch/20505378/oral_catalog/mapping/P18161_205_S79_L004/mapping_vs_oral_catalog_P18161_205_S79_L004_1/P18161_205_S79_L004_1_1.sam
28886126 reads; of these:
  28886126 (100.00%) were unpaired; of these:
    21621617 (74.85%) aligned 0 times
    1604443 (5.55%) aligned exactly 1 time
    5660066 (19.59%) aligned >1 times
25.15% overall alignment rate

######### TaskExcludedMapping(0, 1) ; reference name: Homo_sapiens_GRCh38
Executing mapping command:
bowtie2-align-l --mm -p 10 --end-to-end --sensitive -k 1 --no-head --no-sq --no-unal --omit-sec-seq -x /scratch/20505378/reference/Homo_sapiens_GRCh38/fasta/Homo_sapiens_GRCh38_dnaspace_index -U /scratch/20505378/oral_catalog/mapping/P18161_205_S79_L004/ce45392320e96628c188a48bd449cdc7/P18161_205_S79_L004_1.fastq.idx -S /scratch/20505378/oral_catalog/mapping/P18161_205_S79_L004/mapping_vs_Homo_sapiens_GRCh38_P18161_205_S79_L004_1/P18161_205_S79_L004_1_1.sam
28886126 reads; of these:
  28886126 (100.00%) were unpaired; of these:
    6381885 (22.09%) aligned 0 times
    22504241 (77.91%) aligned exactly 1 time
    0 (0.00%) aligned >1 times
77.91% overall alignment rate

######### TaskExcludedMapping(0, 2) ; reference name: A_thaliana_TAIR10
Executing mapping command:
bowtie2-align-l --mm -p 10 --end-to-end --sensitive -k 1 --no-head --no-sq --no-unal --omit-sec-seq -x /scratch/20505378/reference/A_thaliana_TAIR10/fasta/A_thaliana_TAIR10_dnaspace_index -U /scratch/20505378/oral_catalog/mapping/P18161_205_S79_L004/ce45392320e96628c188a48bd449cdc7/P18161_205_S79_L004_1.fastq.idx -S /scratch/20505378/oral_catalog/mapping/P18161_205_S79_L004/mapping_vs_A_thaliana_TAIR10_P18161_205_S79_L004_1/P18161_205_S79_L004_1_1.sam
28886126 reads; of these:
  28886126 (100.00%) were unpaired; of these:
    28879184 (99.98%) aligned 0 times
    6942 (0.02%) aligned exactly 1 time
    0 (0.00%) aligned >1 times
0.02% overall alignment rate

######### TaskExcludedMapping(0, 3) ; reference name: Bos_taurus_UMD3
Executing mapping command:
bowtie2-align-l --mm -p 10 --end-to-end --sensitive -k 1 --no-head --no-sq --no-unal --omit-sec-seq -x /scratch/20505378/reference/Bos_taurus_UMD3/fasta/Bos_taurus_UMD3_dnaspace_index -U /scratch/20505378/oral_catalog/mapping/P18161_205_S79_L004/ce45392320e96628c188a48bd449cdc7/P18161_205_S79_L004_1.fastq.idx -S /scratch/20505378/oral_catalog/mapping/P18161_205_S79_L004/mapping_vs_Bos_taurus_UMD3_P18161_205_S79_L004_1/P18161_205_S79_L004_1_1.sam
28886126 reads; of these:
  28886126 (100.00%) were unpaired; of these:
    28503839 (98.68%) aligned 0 times
    382287 (1.32%) aligned exactly 1 time
    0 (0.00%) aligned >1 times
1.32% overall alignment rate
removing re-indexed fastq file:
/scratch/20505378/oral_catalog/mapping/P18161_205_S79_L004/ce45392320e96628c188a48bd449cdc7/P18161_205_S79_L004_1.fastq.idx


######### Meteor Mapping task description
Sample name = P18161_205_S79_L004
Library name = P18161_205_S79_L004_2
Project name = oral_catalog
Sequencing device = illumina
Workflow = workflow.ini

######### Task main mapping 1
Executing mapping command:
bowtie2-align-l --mm -p 10 --end-to-end --sensitive -k 10000 --no-head --no-sq --no-unal --omit-sec-seq -x /scratch/20505378/reference/oral_catalog/fasta/oral_catalog_dnaspace_index -U /scratch/20505378/oral_catalog/mapping/P18161_205_S79_L004/ce45392320e96628c188a48bd449cdc7/P18161_205_S79_L004_2.fastq.idx -S /scratch/20505378/oral_catalog/mapping/P18161_205_S79_L004/mapping_vs_oral_catalog_P18161_205_S79_L004_2/P18161_205_S79_L004_2_1.sam
28886126 reads; of these:
  28886126 (100.00%) were unpaired; of these:
    21717290 (75.18%) aligned 0 times
    1601981 (5.55%) aligned exactly 1 time
    5566855 (19.27%) aligned >1 times
24.82% overall alignment rate

######### TaskExcludedMapping(1, 1) ; reference name: Homo_sapiens_GRCh38
Executing mapping command:
bowtie2-align-l --mm -p 10 --end-to-end --sensitive -k 1 --no-head --no-sq --no-unal --omit-sec-seq -x /scratch/20505378/reference/Homo_sapiens_GRCh38/fasta/Homo_sapiens_GRCh38_dnaspace_index -U /scratch/20505378/oral_catalog/mapping/P18161_205_S79_L004/ce45392320e96628c188a48bd449cdc7/P18161_205_S79_L004_2.fastq.idx -S /scratch/20505378/oral_catalog/mapping/P18161_205_S79_L004/mapping_vs_Homo_sapiens_GRCh38_P18161_205_S79_L004_2/P18161_205_S79_L004_2_1.sam
28886126 reads; of these:
  28886126 (100.00%) were unpaired; of these:
    6636690 (22.98%) aligned 0 times
    22249436 (77.02%) aligned exactly 1 time
    0 (0.00%) aligned >1 times
77.02% overall alignment rate

######### TaskExcludedMapping(1, 2) ; reference name: A_thaliana_TAIR10
Executing mapping command:
bowtie2-align-l --mm -p 10 --end-to-end --sensitive -k 1 --no-head --no-sq --no-unal --omit-sec-seq -x /scratch/20505378/reference/A_thaliana_TAIR10/fasta/A_thaliana_TAIR10_dnaspace_index -U /scratch/20505378/oral_catalog/mapping/P18161_205_S79_L004/ce45392320e96628c188a48bd449cdc7/P18161_205_S79_L004_2.fastq.idx -S /scratch/20505378/oral_catalog/mapping/P18161_205_S79_L004/mapping_vs_A_thaliana_TAIR10_P18161_205_S79_L004_2/P18161_205_S79_L004_2_1.sam
28886126 reads; of these:
  28886126 (100.00%) were unpaired; of these:
    28878930 (99.98%) aligned 0 times
    7196 (0.02%) aligned exactly 1 time
    0 (0.00%) aligned >1 times
0.02% overall alignment rate

######### TaskExcludedMapping(1, 3) ; reference name: Bos_taurus_UMD3
Executing mapping command:
bowtie2-align-l --mm -p 10 --end-to-end --sensitive -k 1 --no-head --no-sq --no-unal --omit-sec-seq -x /scratch/20505378/reference/Bos_taurus_UMD3/fasta/Bos_taurus_UMD3_dnaspace_index -U /scratch/20505378/oral_catalog/mapping/P18161_205_S79_L004/ce45392320e96628c188a48bd449cdc7/P18161_205_S79_L004_2.fastq.idx -S /scratch/20505378/oral_catalog/mapping/P18161_205_S79_L004/mapping_vs_Bos_taurus_UMD3_P18161_205_S79_L004_2/P18161_205_S79_L004_2_1.sam
28886126 reads; of these:
  28886126 (100.00%) were unpaired; of these:
    28512731 (98.71%) aligned 0 times
    373395 (1.29%) aligned exactly 1 time
    0 (0.00%) aligned >1 times
1.29% overall alignment rate
removing re-indexed fastq file:
/scratch/20505378/oral_catalog/mapping/P18161_205_S79_L004/ce45392320e96628c188a48bd449cdc7/P18161_205_S79_L004_2.fastq.idx

Launch counting

Executing counting command:
meteor-counter -w /scratch/20505378/workflow.ini -i /scratch/20505378/oral_catalog/sample/P18161_205_S79_L004 -p /scratch/20505378/oral_catalog -o mapping
######### workspace preparation
######### Meteor task description
Sample name = P18161_205_S79_L004
Library name = P18161_205_S79_L004_1
Project name = oral_catalog
Sequencing device = illumina
Workflow = workflow.ini
######### Meteor task description
Sample name = P18161_205_S79_L004
Library name = P18161_205_S79_L004_2
Project name = oral_catalog
Sequencing device = illumina
Workflow = workflow.ini
######### Task main counting

Job finished !
Done !
Job finished without errors ...
...Tue Jun 15 12:28:26 CEST 2021: Map_reads - done
SampleCount: 1
RunSampleCount: 2

######### profiling job started

1000000 processed records.
2000000 processed records.
3000000 processed records.
4000000 processed records.
5000000 processed records.
6000000 processed records.
7000000 processed records.
8000000 processed records.
8403558 processed records.

Merged profiled data are saved here: /scratch/20505378/oral_catalog/profiles/P18161_205_S79_L004.tsv

Counting report is saved here: /scratch/20505378/oral_catalog/profiles/P18161_205_S79_L004_counting_report.csv

Extended counting report is saved here: /scratch/20505378/oral_catalog/profiles/P18161_205_S79_L004_extended_counting_report.csv

######### Job finished
...Tue Jun 15 12:28:46 CEST 2021: Quantify - done
rm: cannot remove ‘/scratch/20505378/working’: No such file or directory
sending incremental file list
created directory /proj/uppstore2019028/projects/metagenome/theo/newscripts/removeafter
./
oral_catalog/
oral_catalog/mapping/
oral_catalog/profiles/
oral_catalog/profiles/P18161_205_S79_L004.tsv
         32,768   0%    0.00kB/s    0:00:00       86,111,561 100%  228.67MB/s    0:00:00 (xfr#1, to-chk=8/14)
oral_catalog/profiles/P18161_205_S79_L004_counting_report.csv
            501 100%    1.36kB/s    0:00:00              501 100%    1.36kB/s    0:00:00 (xfr#2, to-chk=7/14)
oral_catalog/profiles/P18161_205_S79_L004_extended_counting_report.csv
            750 100%    2.04kB/s    0:00:00              750 100%    2.04kB/s    0:00:00 (xfr#3, to-chk=6/14)
oral_catalog/profiles/P18161_205_S79_L004_gene_profile.ini
          3,092 100%    8.41kB/s    0:00:00            3,092 100%    8.41kB/s    0:00:00 (xfr#4, to-chk=5/14)
oral_catalog/sample/
oral_catalog/sample/P18161_205_S79_L004/
oral_catalog/sample/P18161_205_S79_L004/P18161_205_S79_L004_1.fastq
         32,768   0%   86.49kB/s   33:12:42       80,642,048   0%   76.91MB/s    0:02:10      135,823,360   1%   62.21MB/s    0:02:40      268,730,368   2%   83.15MB/s    0:01:58      383,025,152   3%   89.49MB/s    0:01:48      495,321,088   4%   96.88MB/s    0:01:39      612,990,976   5%  113.79MB/s    0:01:23      699,695,104   6%  102.78MB/s    0:01:31      825,425,920   7%  105.53MB/s    0:01:28      946,634,752   9%  107.63MB/s    0:01:25    1,080,688,640  10%  111.54MB/s    0:01:21    1,210,351,616  11%  121.75MB/s    0:01:13    1,316,847,616  12%  117.16MB/s    0:01:15    1,436,385,280  13%  116.79MB/s    0:01:14    1,565,884,416  15%  115.71MB/s    0:01:14    1,695,055,872  16%  115.65MB/s    0:01:13    1,814,331,392  17%  118.67MB/s    0:01:10    1,934,655,488  18%  118.86MB/s    0:01:09    2,061,008,896  19%  118.08MB/s    0:01:08    2,178,973,696  21%  115.38MB/s    0:01:09    2,294,022,144  22%  114.40MB/s    0:01:08    2,415,689,728  23%  114.72MB/s    0:01:07    2,544,140,288  24%  115.22MB/s    0:01:06    2,658,697,216  25%  114.40MB/s    0:01:05    2,776,924,160  26%  115.16MB/s    0:01:04    2,897,248,256  28%  114.30MB/s    0:01:03    3,031,465,984  29%  115.67MB/s    0:01:01    3,144,843,264  30%  115.44MB/s    0:01:00    3,254,091,776  31%  113.31MB/s    0:01:01    3,362,029,568  32%  110.87MB/s    0:01:01    3,491,594,240  33%  109.79MB/s    0:01:00    3,610,083,328  34%  110.98MB/s    0:00:59    3,720,380,416  35%  111.23MB/s    0:00:58    3,849,945,088  37%  116.39MB/s    0:00:54    3,973,054,464  38%  114.88MB/s    0:00:54    4,087,119,872  39%  113.79MB/s    0:00:53    4,209,541,120  40%  116.65MB/s    0:00:51    4,324,622,336  41%  111.36MB/s    0:00:52    4,449,402,880  43%  111.75MB/s    0:00:51    4,568,678,400  44%  113.00MB/s    0:00:49    4,687,953,920  45%  112.29MB/s    0:00:49    4,821,647,360  46%  118.56MB/s    0:00:45    4,941,611,008  47%  117.41MB/s    0:00:44    5,050,826,752  48%  115.04MB/s    0:00:44    5,178,425,344  50%  116.97MB/s    0:00:43    5,308,121,088  51%  116.04MB/s    0:00:42    5,427,724,288  52%  115.93MB/s    0:00:41    5,546,606,592  53%  118.23MB/s    0:00:39    5,673,287,680  54%  118.07MB/s    0:00:38    5,801,803,776  56%  117.76MB/s    0:00:37    5,916,262,400  57%  116.56MB/s    0:00:37    6,036,258,816  58%  116.83MB/s    0:00:35    6,165,594,112  59%  117.46MB/s    0:00:34    6,281,265,152  60%  114.40MB/s    0:00:34    6,400,540,672  61%  115.55MB/s    0:00:33    6,509,592,576  62%  112.82MB/s    0:00:33    6,638,043,136  64%  112.58MB/s    0:00:32    6,764,625,920  65%  115.18MB/s    0:00:30    6,871,875,584  66%  112.32MB/s    0:00:30    6,994,558,976  67%  115.68MB/s    0:00:28    7,123,795,968  68%  115.90MB/s    0:00:27    7,244,120,064  70%  114.38MB/s    0:00:26    7,363,461,120  71%  117.26MB/s    0:00:24    7,485,554,688  72%  117.09MB/s    0:00:23    7,617,544,192  73%  117.75MB/s    0:00:22    7,736,426,496  74%  117.40MB/s    0:00:21    7,850,983,424  75%  116.23MB/s    0:00:20    7,975,895,040  77%  116.94MB/s    0:00:19    8,095,825,920  78%  114.03MB/s    0:00:19    8,214,577,152  79%  114.00MB/s    0:00:18    8,334,376,960  80%  115.28MB/s    0:00:16    8,468,463,616  81%  117.47MB/s    0:00:15    8,583,151,616  83%  116.25MB/s    0:00:14    8,689,057,792  84%  113.18MB/s    0:00:14    8,877,244,416  85%  129.49MB/s    0:00:11    9,170,190,336  88%  167.39MB/s    0:00:06    9,472,638,976  91%  212.18MB/s    0:00:03    9,770,467,328  94%  258.02MB/s    0:00:02   10,045,980,672  97%  278.86MB/s    0:00:01   10,314,416,128  99%  273.01MB/s    0:00:00   10,340,543,277 100%  124.48MB/s    0:01:19 (xfr#5, to-chk=3/14)
oral_catalog/sample/P18161_205_S79_L004/P18161_205_S79_L004_1_census_stage_0.ini
            273 100%    2.93kB/s    0:00:00              273 100%    2.93kB/s    0:00:00 (xfr#6, to-chk=2/14)
oral_catalog/sample/P18161_205_S79_L004/P18161_205_S79_L004_2.fastq
         32,768   0%  347.83kB/s    8:12:43      263,847,936   2%  251.62MB/s    0:00:38      578,912,256   5%  276.18MB/s    0:00:34      846,036,992   8%  269.13MB/s    0:00:34    1,148,583,936  11%  274.05MB/s    0:00:32    1,432,322,048  13%  278.80MB/s    0:00:31    1,559,494,656  15%  233.96MB/s    0:00:36    1,676,705,792  16%  198.20MB/s    0:00:42    1,789,624,320  17%  152.95MB/s    0:00:54    1,915,060,224  18%  115.18MB/s    0:01:10    2,037,678,080  19%  114.01MB/s    0:01:10    2,152,595,456  20%  113.46MB/s    0:01:09    2,268,102,656  22%  113.96MB/s    0:01:08    2,391,048,192  23%  113.37MB/s    0:01:07    2,512,420,864  24%  113.02MB/s    0:01:07    2,633,269,248  25%  114.34MB/s    0:01:05    2,751,758,336  26%  115.17MB/s    0:01:03    2,881,683,456  28%  116.83MB/s    0:01:01    3,005,251,584  29%  117.47MB/s    0:01:00    3,113,779,200  30%  114.56MB/s    0:01:01    3,226,664,960  31%  113.25MB/s    0:01:00    3,355,213,824  32%  112.93MB/s    0:00:59    3,481,829,376  33%  113.62MB/s    0:00:58    3,600,580,608  35%  116.03MB/s    0:00:56    3,699,212,288  35%  112.66MB/s    0:00:57    3,799,023,616  36%  105.63MB/s    0:00:59    3,902,373,888  37%  100.17MB/s    0:01:02    4,017,127,424  39%   99.06MB/s    0:01:01    4,135,616,512  40%  103.66MB/s    0:00:57    4,254,171,136  41%  108.30MB/s    0:00:54    4,380,721,152  42%  113.82MB/s    0:00:50    4,500,291,584  43%  115.17MB/s    0:00:49    4,623,269,888  44%  116.35MB/s    0:00:47    4,758,044,672  46%  120.22MB/s    0:00:44    4,857,036,800  47%  113.59MB/s    0:00:46    4,967,432,192  48%  111.40MB/s    0:00:46    5,082,677,248  49%  109.56MB/s    0:00:46    5,203,296,256  50%  106.18MB/s    0:00:46    5,325,488,128  51%  111.77MB/s    0:00:43    5,443,715,072  52%  113.64MB/s    0:00:41    5,568,200,704  54%  115.84MB/s    0:00:39    5,698,781,184  55%  118.19MB/s    0:00:37    5,822,218,240  56%  118.49MB/s    0:00:36    5,937,430,528  57%  117.80MB/s    0:00:36    6,064,799,744  58%  118.49MB/s    0:00:34    6,194,495,488  60%  118.25MB/s    0:00:33    6,309,707,776  61%  116.28MB/s    0:00:33    6,433,570,816  62%  118.35MB/s    0:00:31    6,569,623,552  63%  120.30MB/s    0:00:30    6,699,188,224  65%  120.30MB/s    0:00:29    6,813,188,096  66%  120.01MB/s    0:00:28    6,935,511,040  67%  119.64MB/s    0:00:27    7,064,289,280  68%  118.03MB/s    0:00:26    7,177,076,736  69%  114.02MB/s    0:00:26    7,296,352,256  70%  115.25MB/s    0:00:25    7,428,210,688  72%  117.53MB/s    0:00:23    7,561,248,768  73%  118.57MB/s    0:00:22    7,678,033,920  74%  119.53MB/s    0:00:21    7,784,890,368  75%  116.56MB/s    0:00:20    7,908,655,104  76%  114.63MB/s    0:00:20    8,034,811,904  78%  112.99MB/s    0:00:19    8,149,958,656  79%  112.60MB/s    0:00:18    8,276,443,136  80%  117.25MB/s    0:00:16    8,404,664,320  81%  118.32MB/s    0:00:15    8,511,848,448  82%  113.14MB/s    0:00:15    8,604,909,568  83%  107.88MB/s    0:00:15    8,716,058,624  84%  104.29MB/s    0:00:14    8,841,756,672  85%  103.69MB/s    0:00:13    8,964,571,136  87%  107.91MB/s    0:00:11    9,083,846,656  88%  114.16MB/s    0:00:10    9,212,821,504  89%  118.41MB/s    0:00:08    9,344,155,648  90%  119.75MB/s    0:00:07    9,459,236,864  91%  118.00MB/s    0:00:06    9,573,793,792  93%  116.87MB/s    0:00:05    9,696,739,328  94%  115.43MB/s    0:00:04    9,816,834,048  95%  112.75MB/s    0:00:04    9,935,290,368  96%  113.50MB/s    0:00:02   10,052,206,592  97%  113.98MB/s    0:00:01   10,185,211,904  99%  116.37MB/s    0:00:00   10,283,112,847 100%  124.53MB/s    0:01:18 (xfr#7, to-chk=1/14)
oral_catalog/sample/P18161_205_S79_L004/P18161_205_S79_L004_2_census_stage_0.ini
            273 100%    0.37kB/s    0:00:00              273 100%    0.37kB/s    0:00:00 (xfr#8, to-chk=0/14)

sent 20,714,829,545 bytes  received 355 bytes  128,265,200.62 bytes/sec
total size is 20,709,772,574  speedup is 1.00
...Tue Jun 15 12:31:30 CEST 2021: Recover - done
